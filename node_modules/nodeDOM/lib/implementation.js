(function () {
	"use strict";

	var Document = require('./document.js');
	var DocumentType = require('./documenttype.js');
	var Element = require('./element.js');

	function DOMImplementation () {

	}

	Object.defineProperties(DOMImplementation.prototype, {
		'createDocument': {
			value: function (namespace, qualifiedName, doctype) {
				var document = new Document ();
				if (doctype) {
					document.appendChild(doctype);
				}
				if (qualifiedName) {
					var elem = new Element (qualifiedName);
					document.appendChild(elem);
				}
				Object.defineProperty(document, 'implementation', {value: this, writable: false, enumerable: true, configurable: false});
				return document;
			},
			writable: false,
			enumerable: true,
			configurable: false
		},
		'createDocumentType' : {
			value: function (qualifiedName, publicId, systemId) {
				return new DocumentType (qualifiedName, publicId, systemId);
			},
			writable: false,
			enumerable: true,
			configurable: false
		},
		'createHTMLDocument': {
			value: function (title, doctype) {
				var document = this.createDocument(null, 'html', doctype || this.createDocumentType('html')),
				    fragment = document.createDocumentFragment(),
				    head = document.createElement('head'),
				    t = document.createElement('title'),
				    meta = document.createElement('meta');
				t.appendChild(document.createTextNode(title));
				head.appendChild(meta);
				head.appendChild(t);
				fragment.appendChild(head);
				fragment.appendChild(document.createElement('body'));
				document.getElementsByTagName('html')[0].appendChild(fragment);
				meta.setAttribute('content', 'text/html');
				meta.setAttribute('charset', document.charset);
				return document;
			},
			writable: false,
			enumerable: true,
			configurable: false
		},
		'createSVGDocument': {
			value: function (doctype) {
				return this.createDocument(null, 'svg', doctype || this.createDocumentType('svg'));
			},
			writable: false,
			enumerable: true,
			configurable: false
		}
	});

	module.exports = DOMImplementation;
}) ()